---
import Layout from "@/components/Layout.astro"
import PageTitle from "@/components/PageTitle.astro"
import Link from "@/components/Link.astro"

import { notes, tags } from "@/utils/content"
import { createI18n } from "@/utils/i18n"

const t = createI18n("en")

const title = t("notes.tags.indexTitle")

function getTagCount(slug: string) {
  return notes.filter((note) => note.data.tags?.some((t) => t.slug === slug)).length
}
---

<Layout title={title} lang="en">
  <!-- Title -->
  <PageTitle>
    <Fragment>{title}</Fragment>
    <span slot="subtitle">{t("ui.total", tags.length)}</span>
  </PageTitle>

  <!-- Tags -->
  {tags?.length > 0 ? tags.map((tag) => (
    <div class="mb-1">
      <Link href={`/notes/tags/${tag.slug}`}>{tag.display} ({getTagCount(tag.slug)})</Link>
    </div>
  )) : <p class="text-neutral-500">{t("notes.tags.notFound")}</p>}
</Layout>
