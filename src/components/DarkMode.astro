<script is:inline>
  (function () {
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    const root = document.documentElement;

    function applyTheme(e) {
      const isDark = e.matches !== undefined ? e.matches : e;
      root.classList.toggle('dark', isDark);
    }

    // Apply initial
    applyTheme(mql);

    // Watch for changes
    if (mql.addEventListener) {
      mql.addEventListener('change', applyTheme);
    } else {
      mql.addListener(applyTheme); // Safari < 14
    }
  })();
</script>
